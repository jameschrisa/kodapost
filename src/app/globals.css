@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================================
   Base layer — shadcn theme variables, resets, defaults
   ========================================================================== */

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;

    /* Custom spacing scale */
    --spacing-section: 2rem;
    --spacing-card: 1.5rem;
    --spacing-inline: 0.75rem;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "cv11", "ss01";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  /* Smooth transitions for all interactive elements */
  button,
  a,
  input,
  textarea,
  select,
  [role="button"] {
    @apply transition-colors duration-200;
  }
}

/* ==========================================================================
   Component layer — reusable KodaPost-specific classes
   ========================================================================== */

@layer components {
  /* Dropzone — drag & drop file upload area */
  .dropzone {
    @apply relative flex flex-col items-center justify-center gap-3
           rounded-xl border-2 border-dashed border-muted-foreground/25
           bg-transparent p-10 text-center
           transition-all duration-200 cursor-pointer;
  }

  .dropzone:hover {
    @apply border-muted-foreground/50;
  }

  .dropzone.active {
    @apply border-primary bg-primary/5;
  }

  /* Slide preview — individual carousel slide card */
  .slide-preview {
    @apply relative overflow-hidden rounded-xl border bg-card shadow-sm
           transition-all duration-200;
  }

  .slide-preview:hover {
    @apply shadow-md -translate-y-0.5;
  }

  .slide-preview .slide-badge {
    @apply absolute z-10 flex items-center gap-1
           rounded-full bg-black/60 px-2 py-0.5
           text-[10px] font-medium text-white;
  }

  .slide-preview .slide-overlay {
    @apply absolute inset-0 flex items-center justify-center
           bg-black/0 opacity-0 transition-all duration-200;
  }

  .slide-preview:hover .slide-overlay {
    @apply bg-black/30 opacity-100;
  }

  /* Step indicator — horizontal workflow progress */
  .step-indicator {
    @apply flex w-full items-center;
  }

  .step-indicator .step-dot {
    @apply flex h-9 w-9 shrink-0 items-center justify-center
           rounded-full border-2 transition-colors duration-200;
  }

  .step-indicator .step-dot.completed {
    @apply border-primary bg-primary text-primary-foreground;
  }

  .step-indicator .step-dot.current {
    @apply border-primary bg-primary/10 text-primary;
  }

  .step-indicator .step-dot.upcoming {
    @apply border-muted-foreground/30 text-muted-foreground/50;
  }

  .step-indicator .step-connector {
    @apply h-0.5 flex-1 transition-colors duration-300;
  }

  .step-indicator .step-connector.completed {
    @apply bg-primary;
  }

  .step-indicator .step-connector.upcoming {
    @apply bg-border;
  }

  /* Ratio bar — image source uploaded/generated indicator */
  .ratio-bar {
    @apply flex h-3 w-full overflow-hidden rounded-full bg-muted;
  }

  .ratio-bar .ratio-uploaded {
    @apply bg-green-500 transition-all duration-300;
  }

  .ratio-bar .ratio-generated {
    @apply bg-orange-400 transition-all duration-300;
  }
}

/* ==========================================================================
   Utility layer — additional helpers
   ========================================================================== */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* ==========================================================================
   Print styles — clean output for PDF export
   ========================================================================== */

@media print {
  body {
    background: white !important;
    color: black !important;
  }

  header,
  nav,
  footer,
  .step-indicator,
  button,
  .dropzone {
    display: none !important;
  }

  .slide-preview {
    break-inside: avoid;
    page-break-inside: avoid;
    box-shadow: none !important;
    border: 1px solid #ddd !important;
  }

  .slide-preview .slide-overlay,
  .slide-preview .slide-badge {
    display: none !important;
  }

  @page {
    margin: 1cm;
  }
}
